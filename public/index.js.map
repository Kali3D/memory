{"version":3,"sources":["app/js/Card.js","app/js/Manager.js","app/js/Spinner.js","app/js/utils.js"],"names":["Card","index","fruit","element","append","setEvents","on","event","preventDefault","manager","spin","Manager","spinner","Spinner","fruitClicked","nbClicks","nbPairs","fruits","slice","ranks","elements","fruitIndex","i","target","hasClass","pair","setTimeout","endGame","nClicks","console","log","module","exports","stored","toggle","eval","className","targets","from","to","display","removeClass","addClass","id","css","randomizeArray","array","sort","Math","random"],"mappings":"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","file":"public/index.js","sourcesContent":["import $ from \"jquery\";\n\nclass Card {\n\tconstructor(index, fruit) {\n\t\tthis.element = $(`<div class='card ${fruit}' id='card${index}'/></div>`);\n\t\tthis.element.append(\"<img src='./images/cover.jpg' />\");\n\t\tthis.setEvents();\n\t}\n\n\tsetEvents() {\n\t\tthis.element.on(\"mousemove\", function(event) {event.preventDefault()});\n\t\tthis.element.on(\"click\", function() {manager.spin(this)});\n\t}\n};\n\nexport default Card;","import $ from \"jquery\";\n\nimport Card from \"./Card\";\nimport Spinner from \"./Spinner\";\nimport {randomizeArray} from \"./utils\";\n\nclass Manager {\n\n\tconstructor() {\n\t\tthis.spinner = new Spinner();\n\t\tthis.fruitClicked = null;\n\t\tthis.nbClicks = 0;\n\t\tthis.nbPairs = 0;\n\t}\n\n\tsetCards() {\n\t\t//creation de la liste fruits réduite à 14\n\t\tconst fruits = ['pomme', 'banane', 'orange', 'citronVert', 'grenade', 'abricot', 'citronJaune', 'fraise', 'pomme', 'peche', 'raisin', 'pasteque', 'prune', 'poire', 'cerise', 'framboise', 'mangue', 'bigarot'];\n\t\trandomizeArray(fruits).slice(14);\n\t\t\n\t\t//positions aléatoires\n\t\tconst ranks = randomizeArray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28]);\n\n\t\t//creation du tableau de cartes aléatoire\n\t\tconst elements = [];\n\t\tlet fruitIndex = 0;\n\t\tfor (let i=0; i<28; i++) {\n\t\t\telements[ranks[i]] =  new Card(i, fruits[fruitIndex]).element;\n\t\t\t//toutes les 2 cartes, on change de fruit\n\t\t\tif (i%2 === 1)\n\t\t\t\tfruitIndex++;\n\t\t}\n\n\t\t//ajout du html dans la div plateau\n\t\t$(\".board\").append(elements);\n\t};\n\n\tspin(target) {\n\t\t//on ne retourne une carte que si moins de 2 cartes sont retournées\n\t\t//et si cette carte n'est pas déjà retournée\n\t\tif (this.nbClicks < 2 && !$(target).hasClass(\"discover\")) {\n\t\t\tif (!this.fruitClicked) {\n\t\t\t\t//on retourne la première carte\n\t\t\t\tthis.spinner.spin(target);\n\t\t\t\tthis.fruitClicked = target;\n\t\t\t\tthis.nbClicks++;\n\t\t\t} else {\n\t\t\t\t// on retourne la seconde ...\n\t\t\t\tthis.spinner.spin(target, this.fruitClicked);\n\t\t\t\tthis.fruitClicked = null;\n\t\t\t\tthis.nbClicks++;\n\t\t\t\t// ... et on verifie si c'est une paire\n\t\t\t\tif (this.spinner.pair) {\n\t\t\t\t\tthis.nbClicks = 0;\n\t\t\t\t\tthis.nbPairs++;\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.nbClicks = 0;\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t\t//si toutes les cartes sont retournées, on clôture le jeu\n\t\t\t\tif (this.nbPairs === 14)\n\t\t\t\t\tthis.endGame();\n\n\t\t\t}\n\t\t}\n\t};\n\n\tendGame() {\n\t\tthis.nClicks = 3;\n\t\tconsole.log(\"game ended\");\n\t}\n}\n\nmodule.exports = Manager;","import $ from \"jquery\";\n\nclass Spinner {\n\n\tspin(target, stored) {\n\t\tthis.toggle([target], \"recover\", \"discover\", \"none\");\n\t\tif (stored)\n\t\t\tthis.eval(target, stored);\n\t};\n\n\teval(target, stored) {\n\t\tthis.pair = true;\t\n\t\tif (target.className !== stored.className) {\n\t\t\tthis.pair = false;\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.toggle([target, stored], \"discover\", \"recover\", \"block\");\n\t\t\t}, 1500);\n\t\t}\n\t}\n\n\ttoggle(targets, from, to, display, stored) {\n\t\t$(targets[0]).removeClass(from).addClass(to);\n\t\tif (targets[1])\n\t\t\t$(targets[1]).removeClass(from).addClass(to);\n\t\tsetTimeout(() => {\n\t\t\t$(\"#\"+targets[0].id + \" > img\").css({display: display});\n\t\t\tif (targets[1]) {\n\t\t\t\t$(\"#\"+targets[1].id + \" > img\").css({display: display});\n\t\t\t}\n\n\t\t}, 250);\n\t}\n}\n\nexport default Spinner;","export const randomizeArray = (array) => {\n\tarray.sort(function() {\n\t  return .5 - Math.random();\n\t});\n\treturn array;\n}\n"]}