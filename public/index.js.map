{"version":3,"sources":["app/js/Card.js","app/js/Counter.js","app/js/Manager.js","app/js/Spinner.js","app/js/utils.js"],"names":["Card","index","fruit","element","append","setEvents","on","event","preventDefault","manager","spin","Counter","duration","remain","started","ended","lasted","clock","Clock","parseInt","moment","utc","display","html","format","percent","Math","floor","getElapsedTime","attr","Manager","init","spinner","Spinner","counter","fruitClicked","nbClicks","nbPairs","gameStarted","gameEnded","gameLasted","tools","hideDecal","setTimeout","css","removeClass","addClass","val","setCards","fruits","randomizeArray","slice","ranks","elements","fruitIndex","i","showDecal","func","apply","showBackdrop","key","startGame","start","update","target","hasClass","pair","console","dir","log","endGame","won","requestAnimationFrame","module","exports","stored","toggle","eval","className","targets","from","to","id","array","sort","random","checkDuration","focus","press","release","selector","delay","each","replace","RegExp","length"],"mappings":"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","file":"public/index.js","sourcesContent":["import $ from \"jquery\";\n\nclass Card {\n\tconstructor(index, fruit) {\n\t\tthis.element = $(`<div class='card hideCard ${fruit}' id='card${index}'/></div>`);\n\t\tthis.element.append(\"<img src='./images/cover.jpg' />\");\n\t\tthis.setEvents();\n\t}\n\n\tsetEvents() {\n\t\tthis.element.on(\"mousemove\", function(event) {event.preventDefault()});\n\t\tthis.element.on(\"click\", function() {manager.spin(this)});\n\t}\n};\n\nexport default Card;","import $ from \"jquery\";\nimport moment from \"moment\";\nimport {Clock} from \"three\";\n\nclass Counter {\n\tconstructor() {\n\t\tthis.duration = 0;\n\t\tthis.remain = 0;\n\t\tthis.started = false;\n\t\tthis.ended = false;\n\t\tthis.lasted = 0;\n\t};\n\n\tstart(duration) {\n\t\tthis.started = true;\n\t\tthis.clock = new Clock();\n\t\tthis.duration = parseInt(duration, 10) + 1;\n\t\tthis.remain = moment.utc(this.duration*1000);\n\t\tthis.display();\n\t};\n\n\tdisplay() {\n\t\t$(\".time\").html(`Il vous reste ${this.remain.format('mm:ss')} minute(s)`);\n\t\tconst percent = Math.floor(this.clock.getElapsedTime()/(this.duration-1) * 100);\n\t\t$(\"#elapsed\").attr(\"value\", percent).html(percent+\" %\");\n\t\tthis.lasted = moment.utc(this.clock.getElapsedTime()*1000).format('mm:ss');\n\t\tif (percent >= 100)\n\t\t\tthis.ended = true;\n\t};\n\n\tupdate() {\n\t\tthis.remain = moment.utc(this.duration*1000 - this.clock.getElapsedTime()*1000);\n\t\tthis.display();\n\t};\n};\n\nexport default Counter;","import $ from \"jquery\";\n\nimport Card from \"./Card\";\nimport Spinner from \"./Spinner\";\nimport Counter from \"./Counter\";\nimport * as tools from \"./utils\";\n\nclass Manager {\n\n\tconstructor() {\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tthis.spinner = new Spinner();\n\t\tthis.counter = new Counter();\n\t\tthis.fruitClicked = null;\n\t\tthis.nbClicks = 0;\n\t\tthis.nbPairs = 0;\n\t\tthis.gameStarted = false;\n\t\tthis.gameEnded = false;\n\t\tthis.gameLasted = 0;\n\t\tthis.tools = tools;\n\t}\n\n\treset() {\n\t\tthis.tools.hideDecal(\".card.showCard\", 50);\n\t\tsetTimeout(() => {\n\t\t\t$(\".board\").html(\"\");\n\t\t\t$(\".again\").css({display: \"none\"});\n\t\t\t$(\".beforeCount.v2\").removeClass(\"current\");\n\t\t\t$(\".beforeCount.v1\").addClass(\"current\").css({display: \"flex\"});\n\t\t\t$(\".beforeCount.v1 select\").val(\"1\");\n\t\t\t$(\".beforeCount.v2 input\").val(\"\");\n\t\t\t$(\".backdrop\").removeClass(\"show\");\n\t\t\tthis.init();\n\t\t\tthis.setCards();\n\t\t}, 2000)\n\t}\n\n\tsetCards() {\n\t\t//creation de la liste de fruits réduite à 14\n\t\tconst fruits = ['pomme', 'banane', 'orange', 'citronVert', 'grenade', 'abricot', 'citronJaune', 'fraise', 'pomme', 'peche', 'raisin', 'pasteque', 'prune', 'poire', 'cerise', 'framboise', 'mangue', 'bigarot'];\n\t\tthis.tools.randomizeArray(fruits).slice(14);\n\t\t\n\t\t//positions aléatoires\n\t\tconst ranks = this.tools.randomizeArray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28]);\n\n\t\t//creation du tableau de cartes aléatoire\n\t\tconst elements = [];\n\t\tlet fruitIndex = 0;\n\t\tfor (let i=0; i<28; i++) {\n\t\t\telements[ranks[i]] =  new Card(i, fruits[fruitIndex]).element;\n\t\t\t//toutes les 2 cartes, on change de fruit\n\t\t\tif (i%2 === 1)\n\t\t\t\tfruitIndex++;\n\t\t}\n\n\t\t//ajout du html dans la div plateau\n\t\t$(\".board\").append(elements);\n\t\tsetTimeout(() => {\n\t\t\tthis.tools.showDecal(\".card\", 50);\n\t\t}, 300);\n\t};\n\n\tshowBackdrop(duration, func) {\n\t\t$(\".backdrop\").addClass(\"show\");\n\t\tif (typeof func === \"function\")\n\t\t\tfunc.apply(this);\n\t\tsetTimeout(() => {\n\t\t\t$(\".backdrop\").removeClass(\"show\");\n\t\t}, duration);\n\t}\n\n\tshowScores() {\n\t\tthis.showBackdrop(3000);\n\t}\n\t\n\n\tcheckKey(event) {\n\t\tif (event.key === \"Enter\")\n\t\t\tthis.startGame();\n\t};\n\n\tstartGame() {\n\t\tthis.gameStarted = true;\n\t\t$(\".backdrop\").removeClass(\"show\");\n\t\t$(\".error\").html(\"\");\n\t\tconst val = parseInt($(\".current #duration\").val(), 10);\n\t\tif (!val)  {\n\t\t\t$(\".error\").html(\"Oups ... J'ai pas compris !\");\n\t\t\t$(\".current #duration\").val(\"\");\n\t\t} else if (val > 59) {\n\t\t\t$(\".error\").html(\"Faut pas exag&eacute;rer ... 59 minutes max !\");\n\t\t\t$(\".current #duration\").val(\"\");\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst duration = val * 60;\n\t\t\t\t$(\".beforeCount\").css({display: \"none\"});\n\t\t\t\t$(\".counting\").css({display: \"flex\"});\n\t\t\t\tthis.counter.start(duration);\n\t\t\t\tthis.update();\n\t\t\t}, 300);\n\t\t}\n\t};\n\n\tspin(target) {\n\t\t//on ne retourne une carte que si moins de 2 cartes sont retournées\n\t\t//et si cette carte n'est pas déjà retournée\n\t\tif (this.gameStarted && this.nbClicks < 2 && !$(target).hasClass(\"discover\")) {\n\t\t\tif (!this.fruitClicked) {\n\t\t\t\t//on retourne la première carte\n\t\t\t\tthis.spinner.spin(target);\n\t\t\t\tthis.fruitClicked = target;\n\t\t\t\tthis.nbClicks++;\n\t\t\t} else {\n\t\t\t\t// on retourne la seconde ...\n\t\t\t\tthis.spinner.spin(target, this.fruitClicked);\n\t\t\t\tthis.fruitClicked = null;\n\t\t\t\tthis.nbClicks++;\n\t\t\t\t// ... et on verifie si c'est une paire\n\t\t\t\tif (this.spinner.pair) {\n\t\t\t\t\tthis.nbClicks = 0;\n\t\t\t\t\tthis.nbPairs++;\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (!this.gameEnded)\n\t\t\t\t\t\t\tthis.nbClicks = 0;\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t\t//si toutes les cartes sont retournées, on clôture le jeu\n\t\t\t\tif (this.nbPairs === 14) {\n\t\t\t\t\tthis.gameLasted = this.counter.lasted;\n\t\t\t\t\tconsole.dir(this.counter);\n\t\t\t\t\tconsole.log(this.gameLasted);\n\t\t\t\t\tthis.endGame(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tendGame(won) {\n\t\tthis.nbClicks = 3;\n\t\tthis.gameEnded = true;\n\t\tsetTimeout(() => {\n\t\t\t$(\".counting\").css({display: \"none\"});\n\t\t\t$(\".again\").css({display: \"flex\"});\n\t\t\t$(\".discover\").addClass(\"showDiscovered\");\n\t\t\t$(\".card\").removeClass(\"recover\").removeClass(\"discover\");\n\t\t\tif (won) {\n\t\t\t\tthis.showBackdrop(5000, () => {\n\t\t\t\t\t$(\".backdrop\").html(`Bravo, c'est gagn&eacute; !!!<br />Vous avez trouv&eacute; en ${this.gameLasted} minute(s)`);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.showBackdrop(5000, () => {\n\t\t\t\t\t$(\".backdrop\").html(\"Arf ..., c'est perdu !\");\n\t\t\t\t});\n\t\t\t}\n\t\t}, 500);\n\t};\n\n\tupdate() {\n\t\tif (!this.gameEnded && this.counter && this.counter.started) {\n\t\t\t if (this.counter.ended) {\n\t\t\t\tthis.endGame(false);\n\t\t\t\tthis.gameLasted = this.counter.lasted;\n\t\t\t\tconsole.dir(this.counter);\n\t\t\t\tconsole.log(this.gameLasted);\n\t\t\t\tthis.counter = null;\n\t\t\t} else\n\t\t\t\tthis.counter.update();\n\t\t}\n\t\trequestAnimationFrame(() => this.update());\n\t};\n}\n\nmodule.exports = Manager;","import $ from \"jquery\";\n\nclass Spinner {\n\n\tspin(target, stored) {\n\t\tthis.toggle([target], \"recover\", \"discover\", \"none\");\n\t\tif (stored)\n\t\t\tthis.eval(target, stored);\n\t};\n\n\teval(target, stored) {\n\t\tthis.pair = true;\t\n\t\tif (target.className !== stored.className) {\n\t\t\tthis.pair = false;\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.toggle([target, stored], \"discover\", \"recover\", \"block\");\n\t\t\t}, 1500);\n\t\t}\n\t}\n\n\ttoggle(targets, from, to, display, stored) {\n\t\t$(targets[0]).removeClass(from).addClass(to);\n\t\tif (targets[1])\n\t\t\t$(targets[1]).removeClass(from).addClass(to);\n\t\tsetTimeout(() => {\n\t\t\t$(\"#\"+targets[0].id + \" > img\").css({display: display});\n\t\t\tif (targets[1]) {\n\t\t\t\t$(\"#\"+targets[1].id + \" > img\").css({display: display});\n\t\t\t}\n\n\t\t}, 250);\n\t}\n}\n\nexport default Spinner;","import $ from \"jquery\";\n\nexport const randomizeArray = (array) => {\n\tarray.sort(function() {\n\t  return .5 - Math.random();\n\t});\n\treturn array;\n}\n\nexport const checkDuration = () => {\n\tconst val = $(\".current #duration\").val();\n\tif (val === \"choose\") {\n\t\t$(\".beforeCount.v1\").removeClass(\"current\").css({display: \"none\"});\n\t\t$(\".beforeCount.v2\").addClass(\"current\").css({display: \"flex\"});\n\t\t$(\".beforeCount.v2 input\").focus();\n\t}\n};\n\nexport const press = (event) => {\n\t$(event.target).removeClass(\"released\").addClass(\"pressed\");\n};\n\nexport const release = (event) => {\n\t$(event.target).removeClass(\"pressed\").addClass(\"released\");\n};\n\nexport const showDecal = (selector, delay) => {\n\t$(selector).each(function(id, element) {\n\t\t$(element).attr(\"class\", $(element).attr(\"class\").replace(new RegExp(\"hide\", 'g'), \"show\")).css({\"transition-delay\": (id*(delay ? delay : 100))+\"ms\"});\n\t});\n};\n\nexport const hideDecal = (selector, delay) => {\n\tvar from = $(selector).length * (delay ? delay : 100);\n\t$(selector).each(function(id, element) {\n\t\t$(element).attr(\"class\", $(element).attr(\"class\").replace(new RegExp(\"show\", 'g'), \"hide\")).css({\"transition-delay\": (from - id*(delay ? delay : 100))+\"ms\"});\n\t});\n};\n"]}