{"version":3,"sources":["app/js/Card.js","app/js/Clocks.js","app/js/Counter.js","app/js/Manager.js","app/js/Scores.js","app/js/Spinner.js","app/js/tools.js"],"names":["Card","index","fruit","element","append","on","event","preventDefault","manager","spin","Clocks","createThreeScene","textures","THREE","TextureLoader","load","container","document","getElementById","renderer","WebGLRenderer","canvas","antialias","alpha","setSize","offsetWidth","offsetHeight","setPixelRatio","window","devicePixelRatio","onresize","resize","scene","Scene","root","Object3D","add","camera","PerspectiveCamera","position","set","lookAt","Vector3","light","DirectionalLight","clocks","geometry","PlaneBufferGeometry","i","clock","Mesh","randomizeClock","aspect","innerWidth","innerHeight","updateProjectionMatrix","speedRef","rotationRef","texture","Math","floor","random","length","setMaterial","scale","speed","rotZ","material","map","mat","MeshBasicMaterial","transparent","depthWrite","side","DoubleSide","children","child","rotation","z","y","render","Counter","duration","remain","started","ended","lasted","Clock","parseInt","moment","utc","display","html","format","percent","getElapsedTime","attr","Manager","init","update","spinner","Spinner","counter","scores","Scores","fruitClicked","nbClicks","nbPairs","gameStarted","gameEnded","gameLasted","tools","hideDecal","setTimeout","css","removeClass","addClass","val","setCards","fruits","randomizeArray","slice","ranks","elements","fruitIndex","showDecal","get","showBackdrop","console","dir","key","startGame","start","target","hasClass","pair","endGame","won","date","Date","now","requestAnimationFrame","module","exports","axios","then","result","resp","data","results","Object","keys","score","push","sort","el1","el2","concat","obj","post","log","error","stored","toggle","eval","className","targets","from","to","id","array","res","nbItems","round","undefined","checkDuration","focus","press","release","selector","delay","each","replace","RegExp","func","apply"],"mappings":"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","file":"public/index.js","sourcesContent":["import $ from \"jquery\";\n\nclass Card {\n\tconstructor(index, fruit) {\n\t\t//à la création, les cartes sont cachées à la droite de l'écran\n\t\t//le verso est visible\n\t\tthis.element = $(`<div class='card hideCard ${fruit}' id='card${index}'/></div>`);\n\t\tthis.element.append(\"<img src='./images/cover.jpg?test' />\");\n\n\t\t//évite un mouvement désagréable de la carte quand on clique/glisse\n\t\tthis.element.on(\"mousemove\", function(event) {event.preventDefault()});\n\n\t\t//au click, on repasse la main au manager\n\t\tthis.element.on(\"click\", function() {manager.spin(this)});\n\t}\n};\n\nexport default Card;","import * as THREE from \"three\";\n\n\nclass Clocks {\n\tconstructor() {\n\t\tthis.createThreeScene();\n\t}\n\n\tcreateThreeScene() {\n\t\t//textures\n\t\tthis.textures = [\n\t\t\tnew THREE.TextureLoader().load(\"./images/clock.png\"),\n\t\t\tnew THREE.TextureLoader().load(\"./images/clock2.png\"),\n\t\t\tnew THREE.TextureLoader().load(\"./images/clock3.png\")\n\t\t];\n\n\t\t//renderer\n\t\tthis.container = document.getElementById(\"gl\");\n\t\tthis.renderer = new THREE.WebGLRenderer({canvas: this.container, antialias: true, alpha: true});\n\t\tthis.renderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n\t\tthis.renderer.setPixelRatio(window.devicePixelRatio);\n\t\twindow.onresize = () => this.resize();\n\n\t\t//scene\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.root = new THREE.Object3D();\n\t\tthis.scene.add(this.root);\n\n\t\t//camera\n\t\tthis.camera = new THREE.PerspectiveCamera(45, this.container.offsetWidth/this.container.offsetHeight, 0.1, 1000);\n\t\tthis.camera.position.set(0, 0, 20);\n\t\tthis.camera.lookAt(new THREE.Vector3(0, 0, 0));\n\t\tthis.root.add(this.camera);\n\n\t\t//light\n\t\tconst light = new THREE.DirectionalLight(\"#ffffff\", 1.5);\n\t\tlight.position.set(0, 1, 1);\n\t\tthis.root.add(light);\n\n\t\t//clocks\n\t\tthis.clocks = new THREE.Object3D();\n\t\tconst geometry = new THREE.PlaneBufferGeometry(1, 1);\n\t\tfor (let i=0; i<30; i++) {\n\t\t\tconst clock = new THREE.Mesh(geometry);\n\t\t\tthis.randomizeClock(clock);\n\t\t\tthis.clocks.add(clock);\n\t\t}\n\t\tthis.root.add(this.clocks);\n\t}\n\n\t//permet de resizer le canvas en même temps que la fenêtre\n\tresize() {\n\t\tthis.camera.aspect = window.innerWidth/window.innerHeight;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight);\n\t}\n\n\trandomizeClock(clock) {\n\t\tconst speedRef = 0.03;\n\t\tconst rotationRef = 0.1;\n\t\t//choisit une texture aléatoire dans le tableau\n\t\tconst texture = this.textures[Math.floor(Math.random()*this.textures.length)];\n\t\tthis.setMaterial(clock, texture);\n\t\tconst scale = Math.random()*1.5;\n\t\tclock.scale.set(scale, scale, scale);\n\t\tclock.position.set(Math.random()*30 - 15, Math.random()*15 + 5, 0);\n\t\tclock.speed = speedRef + Math.random() * speedRef*2;\n\t\tclock.rotZ = rotationRef - Math.random() * rotationRef*2;\n\t}\n\n\t//evite la création d'un nouveau matériel à chaque tick\n\tsetMaterial(clock, texture) {\n\t\tif (clock.material.map)\n\t\t\tclock.material.map = texture;\n\t\telse {\n\t\t\tconst mat = new THREE.MeshBasicMaterial({transparent: true, depthWrite: false, map: texture, side: THREE.DoubleSide})\n\t\t\tclock.material = mat;\n\t\t}\n\t}\n\n\t//methode appelée à chaque tick\n\t//on y met à jour tous les objects et on affiche la nouvelle scene\n\tupdate() {\n\t\tfor (var child of this.clocks.children) {\n\t\t\tchild.rotation.z -= child.rotZ;\n\t\t\tchild.position.y -= child.speed;\n\t\t\tif (child.position.y < -15)\n\t\t\t\tthis.randomizeClock(child);\n\t\t}\n\t\tthis.renderer.render(this.scene, this.camera);\n\t}\n};\n\nexport default Clocks;","import $ from \"jquery\";\nimport moment from \"moment\";\nimport {Clock} from \"three\";\n\nclass Counter {\n\tconstructor() {\n\t\tthis.duration = 0;\n\t\tthis.remain = 0;\n\t\tthis.started = false;\n\t\tthis.ended = false;\n\t\tthis.lasted = 0;\n\t};\n\n\tstart(duration) {\n\t\tthis.started = true;\n\t\t//compteur de temps donnant accès au temps écoulé depuis le lancement\n\t\tthis.clock = new Clock();\n\t\t//on ajoute 1 seconde pour qu'à l'affichage on commence bien à la durée sélectionnée (05:00 et non 04:59)\n\t\tthis.duration = parseInt(duration, 10) + 1;\n\t\tthis.remain = moment.utc(this.duration*1000);\n\t\tthis.display();\n\t};\n\n\tdisplay() {\n\t\t//affichage du compteur\n\t\t$(\".time\").html(`Il vous reste ${this.remain.format('mm:ss')} minute(s)`);\n\n\t\t//calcul du temps ecoulé en poucentage pour la barre de progression\n\t\tconst percent = Math.floor(this.clock.getElapsedTime()/(this.duration-1) * 100);\n\t\t$(\"#elapsed\").attr(\"value\", percent).html(percent+\" %\");\n\n\t\t//stockage de la duree de la partie\n\t\tthis.lasted = Math.floor(this.clock.getElapsedTime()*1000);\n\n\t\t//check si le temps imparti est écoulé\n\t\tif (percent >= 100)\n\t\t\tthis.ended = true;\n\t};\n\n\t//appelé à chaque tick si le jeu est démarré et non terminé\n\t//et si le compteur est démarré (started = true) et non termine(ended = false)\n\tupdate() {\n\t\t//mise à jour du temps restant ...\n\t\tthis.remain = moment.utc(this.duration*1000 - this.clock.getElapsedTime()*1000);\n\t\t// ... et de l'affichage\n\t\tthis.display();\n\t};\n};\n\nexport default Counter;","import \"moment/locale/fr\";\nimport \"babel-polyfill\"\n\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport moment from \"moment\";\n\nimport Card from \"./Card\";\nimport Spinner from \"./Spinner\";\nimport Counter from \"./Counter\";\nimport Scores from \"./Scores\";\nimport Clocks from \"./Clocks\";\n\nimport * as tools from \"./tools\";\n\nclass Manager {\n\n\tconstructor() {\n\t\tthis.init();\n\t\tthis.clocks = new Clocks();\n\t\tthis.update();\n\n\t}\n\n\tinit() {\n\t\tthis.spinner = new Spinner();\n\t\tthis.counter = new Counter();\n\t\tthis.scores = new Scores();\n\t\tthis.fruitClicked = null;\n\t\tthis.nbClicks = 0;\n\t\tthis.nbPairs = 0;\n\t\tthis.gameStarted = false;\n\t\tthis.gameEnded = false;\n\t\tthis.gameLasted = 0;\n\t\tthis.tools = tools;\n\t}\n\n\treset() {\n\t\tthis.tools.hideDecal(\".card.showCard\", 50);\n\t\tsetTimeout(() => {\n\t\t\t$(\".board\").html(\"\");\n\t\t\t$(\".again\").css({display: \"none\"});\n\t\t\t$(\".beforeCount.v2\").removeClass(\"current\");\n\t\t\t$(\".beforeCount.v1\").addClass(\"current\").css({display: \"flex\"});\n\t\t\t$(\".beforeCount.v1 select\").val(\"1\");\n\t\t\t$(\".beforeCount.v2 input\").val(\"\");\n\t\t\t$(\".backdrop\").removeClass(\"show\");\n\t\t\tthis.init();\n\t\t\tthis.setCards();\n\t\t}, 2000)\n\t}\n\n\tsetCards() {\n\t\t//on crée 28 cartes => 14 paires\n\n\t\t//creation de la liste de 14 fruits choisis aléatoirement parmi les 18 proposés\n\t\tlet fruits = ['pommeRouge', 'banane', 'orange', 'citronVert', 'grenade', 'abricot', 'citronJaune', 'fraise', 'pommeVerte', 'peche', 'raisin', 'pasteque', 'prune', 'poire', 'cerise', 'framboise', 'mangue', 'bigarot'];\n\t\tfruits = this.tools.randomizeArray(fruits).slice(0, 14);\n\t\t//positions aléatoires dans le plateau pour les mélanger\n\t\tlet ranks = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27];\n//\t\tfor (let i=0; i<5; i++)\n\t\t\tranks = this.tools.randomizeArray(ranks);\n\t\t\n\t\t//on stocke nos 28 cartes mélangées dans un tableau d'éléments\n\t\tconst elements = [];\n\t\tlet fruitIndex = 0;\n\t\tfor (let i=0; i<28; i++) {\n\t\t\telements[ranks[i]] =  new Card(i, fruits[fruitIndex]).element;\n\t\t\t//toutes les 2 cartes, on change de fruit\n\t\t\tif (i%2 === 1)\n\t\t\t\tfruitIndex++;\n\t\t}\n\n\t\t//on ajoute les cartes aux plateau ...\n\t\t$(\".board\").append(elements);\n\t\t// ... et on les anime pour l'affichage\n\t\tsetTimeout(() => {\n\t\t\tthis.tools.showDecal(\".card\", 50);\n\t\t}, 300);\n\t};\n\n\t//recupère les 5 meilleurs scores en base\n\t//et les affiche dans le backdrop\n\tasync showScores() {\n\t\ttry {\n\t\t\tconst html = await this.scores.get();\n\t\t\tthis.tools.showBackdrop(5000, () => {\n\t\t\t\t$(\".backdrop\").html(html);\n\t\t\t});\n\t\t} catch(error) {\n\t\t\tconsole.dir(error);\n\t\t}\n\t}\n\t\n\t//champ de saisie du temps : permet de valider son choix avec 'Enter'\n\t//au lieu de cliquer sur valider\n\tcheckKey(event) {\n\t\tif (event.key === \"Enter\")\n\t\t\tthis.startGame();\n\t};\n\n\tstartGame() {\n\t\tthis.gameStarted = true;\n\t\t//le jeu commence\n\t\t//on retire le backdrop s'il est toujours visible\n\t\t$(\".backdrop\").removeClass(\"show\");\n\n\t\t//on vérifie d'abord si la valeur de temps est valide\n\t\t//le cas échéant on affiche une erreur\n\t\t$(\".error\").html(\"\");\n\t\tconst val = parseInt($(\".current #duration\").val(), 10);\n\t\tif (!val || val < 0)  { //val vaut Nan ou 0\n\t\t\t$(\".error\").html(\"Oups ... J'ai pas compris !\");\n\t\t\t$(\".current #duration\").val(\"\");\n\t\t} else if (val > 59) { // bon y a 28 cartes, personne n'a besoin de plus d'une heure !!\n\t\t\t$(\".error\").html(\"Faut pas exag&eacute;rer ... 59 minutes max !\");\n\t\t\t$(\".current #duration\").val(\"\");\n\t\t} else {\n\t\t\t//on laisse 300ms à l'animation du bouton \n\t\t\tsetTimeout(() => {\n\t\t\t\t//et on démarre le compteur de temps\n\t\t\t\tconst duration = val * 60;\n\t\t\t\t$(\".beforeCount\").css({display: \"none\"});\n\t\t\t\t$(\".counting\").css({display: \"flex\"});\n\t\t\t\tthis.counter.start(duration);\n\t\t\t}, 300);\n\t\t}\n\t};\n\n\tspin(target) {\n\t\t//on ne retourne une carte que si :\n\t\t// - le jeu est démarré\n\t\t// - moins de 2 cartes sont retournées\n\t\t// - la carte cliquée n'est pas déjà retournée\n\t\tif (this.gameStarted && this.nbClicks < 2 && !$(target).hasClass(\"discover\")) {\n\t\t\tif (!this.fruitClicked) {\n\t\t\t\t//on retourne la première carte\n\t\t\t\tthis.spinner.spin(target);\n\t\t\t\tthis.fruitClicked = target;\n\t\t\t\tthis.nbClicks++;\n\t\t\t} else {\n\t\t\t\t// on retourne la seconde ...\n\t\t\t\tthis.spinner.spin(target, this.fruitClicked);\n\t\t\t\tthis.fruitClicked = null;\n\t\t\t\tthis.nbClicks++;\n\t\t\t\t// ... et on verifie si c'est une paire\n\t\t\t\tif (this.spinner.pair) {\n\t\t\t\t\tthis.nbClicks = 0;\n\t\t\t\t\tthis.nbPairs++;\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t// IMPORTANT ! sans ce test ce timeout peut se déclencher APRES la fin du jeu\n\t\t\t\t\t\t// et permettre au joueur de retourner des cartes même s'il a perdu\n\t\t\t\t\t\tif (!this.gameEnded)\n\t\t\t\t\t\t\tthis.nbClicks = 0;\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t\t//si toutes les cartes sont retournées, on clôture le jeu\n\t\t\t\tif (this.nbPairs === 14) {\n\t\t\t\t\t//on conserve la duree de la partie pour stockage\n\t\t\t\t\tthis.gameLasted = this.counter.lasted;\n\t\t\t\t\tthis.endGame(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tendGame(won) {\n\t\tthis.nbClicks = 3;\n\t\tthis.gameEnded = true;\n\t\t//on laisse 500ms à la dernière carte pour se retourner en entier\n\t\tsetTimeout(() => {\n\t\t\t$(\".counting\").css({display: \"none\"});\n\t\t\t$(\".again\").css({display: \"flex\"});\n\n\t\t\t//on applique les classes css 'cartes retournée' pour éviter un flip à 180°\n\t\t\t$(\".discover\").addClass(\"showDiscovered\");\n\t\t\t$(\".card\").removeClass(\"recover\").removeClass(\"discover\");\n\n\t\t\tif (won) {\n\t\t\t\t//si la partie est gagné, on stocke le résultat en base\n\t\t\t\tthis.scores.add({date: moment(Date.now()).format(\"dddd D MMMM YYYY, HH[h]mm\"), duration: this.gameLasted});\n\t\t\t\tthis.tools.showBackdrop(5000, () => {\n\t\t\t\t\t$(\".backdrop\").html(`Bravo, c'est gagn&eacute; !!!<br />Vous avez trouv&eacute; en ${moment.utc(this.gameLasted).format('mm:ss')} minute(s)`);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tools.showBackdrop(5000, () => {\n\t\t\t\t\t$(\".backdrop\").html(\"Arf ..., c'est perdu !\");\n\t\t\t\t});\n\t\t\t}\n\t\t}, 500);\n\t};\n\n\t// exécuté à chaque tick\n\tupdate() {\n\t\t//mise à jour du compteur de temps\n\t\t//on n'exécute cette partie que si le jeu est en cours et qu'il reste du temps\n\t\tif (this.gameStarted && !this.gameEnded) {\n\t\t\tif (this.counter && this.counter.started) {\n\t\t\t\tif (this.counter.ended) {\n\t\t\t\t\tthis.endGame(false);\n\t\t\t\t\tthis.gameLasted = this.counter.lasted;\n\t\t\t\t\tthis.counter = null;\n\t\t\t\t} else\n\t\t\t\t\tthis.counter.update();\n\t\t\t}\n\t\t}\n\n\t\t//mise à jour des positions, rotations, ... des 'clocks'\n\t\tthis.clocks.update();\n\n\t\t//et on recommence au tick suivant\n\t\trequestAnimationFrame(() => this.update());\n\t};\n}\n\nmodule.exports = Manager;","import axios from \"axios\";\nimport moment from \"moment\";\n\nclass Scores {\n\n\t//le manager utilise le mécanisme 'async/await' pour récupérer les meilleurs scores\n\t//on lui retourne une promesse afin qu'il \"attende\" les résultats avant de les afficher\n\tget() {\n\t\t//on demande à la base les 5 meilleurs enregistrements (avec le champ 'duration' le plus petit)\n\t\treturn axios.get(\"http://localhost:3000/scores\").then(result => {\n\t\t\tconst resp = result.data;\n\t\t\tlet results = [];\n\t\t\tfor (let score of Object.keys(resp))\n\t\t\t\tresults.push(resp[score]);\n\n\t\t\t//PERTURBANT : le serveur firebase sélectionne correctement les enregistrements\n\t\t\t//mais lorsqu'il les retourne, iles ne sont pas triés !! \n\t\t\t//(https://firebase.google.com/docs/database/rest/retrieve-data#section-rest-ordered-data)\n\t\t\t//on le retrie donc ici, d'où l'importance de ne récupérer qu'un nombre limité d'enregistrements\n\t\t\tresults = results.sort((el1, el2) => el1.duration - el2.duration);\n\n\t\t\treturn this.html(results);\n\t\t});\n\t};\n\n\thtml(results) {\n\t\tlet html = `<div class='scoreDiv'>\n\t\t<div class=\"principe\">Retrouvez toutes les paires dans le temps imparti et c'est gagné !</div>\n\t\t<div class='best'>5 meilleurs scores :</div>`;\n\t\tfor (let result of results) \n\t\t\t//la duree est stockée en nb de secondes pour permettre le tri\n\t\t\t//on la reformatte ici pour l'affichage\n\t\t\thtml = html.concat(`<div class='score'>\n\t\t\t\t<div class='date'>${result.date}</div>\n\t\t\t\t<div class='duration'>${moment.utc(result.duration).format('mm:ss')}</div></div>`);\n\t\thtml = html.concat(\"</div>\");\n\t\treturn html;\n\t}\n\n\t//ajout d'un enregistrement quand la partie est gagnée\n\tadd(obj) {\n\t\taxios.post(\"http://localhost:3000/score\", obj)\n\t\t.then(resp => {\n\t\t\tconsole.log(resp.data)\n\t\t}).catch(error => {\n\t\t\tconsole.log(error);\n\t\t});\n\t};\n};\n\nexport default Scores;","import $ from \"jquery\";\n\nclass Spinner {\n\n\tspin(target, stored) {\n\t\tthis.toggle([target], \"recover\", \"discover\", \"none\");\n\n\t\t//si une 1ère carte est stockée, on évalue la paire\n\t\tif (stored)\n\t\t\tthis.eval(target, stored);\n\t};\n\n\teval(target, stored) {\n\t\t//cas par défaut, soyons positifs !\n\t\tthis.pair = true;\t\n\n\t\t//on compare les classes css\n\t\t//2 cartes identiques auront la même classes fruit\n\t\tif (target.className !== stored.className) {\n\t\t\tthis.pair = false;\t\n\t\t\t//on laisse les cartes découvertes 1.5s pour qu'on puisse les mémoriser\n\t\t\t//et on les retourne\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.toggle([target, stored], \"discover\", \"recover\", \"block\");\n\t\t\t}, 1500);\n\t\t}\n\t}\n\n\t//l'image du fruit est dans la propriété background\n\t//on utilise une image dans la div 'card' pour simuler la carte retournée\n\t//l'argument display sert à gérer l'apparition/disparition de ce \"verso\" de la carte\n\t//on utilise un tableau de cibles afin de pouvoir animer 2 cartes en même temps\n\ttoggle(targets, from, to, display) {\n\t\t$(targets[0]).removeClass(from).addClass(to);\n\t\tif (targets[1])\n\t\t\t$(targets[1]).removeClass(from).addClass(to);\n\t\t//l'animation est linéaire (régulière)\n\t\t//à la moitié de l'animation (250ms) la carte n'est qu'un trait à l'écran\n\t\t//on profite de cette instant pour aficher/cacher le verso\n\t\tsetTimeout(() => {\n\t\t\t$(\"#\"+targets[0].id + \" > img\").css({display: display});\n\t\t\tif (targets[1])\n\t\t\t\t$(\"#\"+targets[1].id + \" > img\").css({display: display});\n\t\t}, 250);\n\t}\n}\n\nexport default Spinner;","import $ from \"jquery\";\n\nexport const randomizeArray = (array) => {\n\n\tconst res = [];\n\tlet nbItems = 0;\n\twhile(nbItems < array.length) {\n\t\tlet index = Math.round(Math.random()*(array.length-1));\n\t\tif (res[index] === undefined)\n\t\t\tif (res[index-1] === undefined || (res[index-1] !== array[nbItems] + 1 && res[index-1] !== array[nbItems] - 1))\n\t\t\t\tif (res[index+1] === undefined || (res[index+1] !== array[nbItems] + 1 && res[index+1] !== array[nbItems] - 1)) {\n\t\t\t\t\tres[index] = array[nbItems];\n\t\t\t\t\tnbItems++;\n\t\t\t\t}\n\t}\n\treturn res;\n\n\n\n/*\n\tarray.sort(function() {\n\t\t//renvoie une valeur aléatoire comprise entre -5 et 5\n\t  \treturn 5 - Math.random()*10;\n\t});\n\treturn array;*/\n}\n\n//gère le changement d'état du <select> de durée\n//si le choix est 'choose', on affiche le champ de saisie\nexport const checkDuration = () => {\n\tconst val = $(\".current #duration\").val();\n\tif (val === \"choose\") {\n\t\t$(\".beforeCount.v1\").removeClass(\"current\").css({display: \"none\"});\n\t\t$(\".beforeCount.v2\").addClass(\"current\").css({display: \"flex\"});\n\t\t$(\".beforeCount.v2 input\").focus();\n\t}\n};\n\n//animations boutons\nexport const press = (event) => {\n\t$(event.target).removeClass(\"released\").addClass(\"pressed\");\n};\n\nexport const release = (event) => {\n\t$(event.target).removeClass(\"pressed\").addClass(\"released\");\n};\n\n\n\n//permet d'animer une collection d'éléments avec un décalage dans l'exécution\n//on utilise pour ce faire des classes css de la forme hideXXX et showXXX\n\n//le mécanisme show affiche les éléments de 0 à x\n//hide var traiter les éléments de x à 0 \n//(dans notre cas, évite que les cartes se chevauchent en disparaissant)\n\nexport const showDecal = (selector, delay=100) => {\n\t$(selector).each(function(id, element) {\n\t\t$(element).attr(\"class\", $(element).attr(\"class\").replace(new RegExp(\"hide\", 'g'), \"show\")).css({\"transition-delay\": (id*delay)+\"ms\"});\n\t});\n};\n\nexport const hideDecal = (selector, delay=100) => {\n\tvar from = $(selector).length * delay;\n\t$(selector).each(function(id, element) {\n\t\t$(element).attr(\"class\", $(element).attr(\"class\").replace(new RegExp(\"show\", 'g'), \"hide\")).css({\"transition-delay\": (from - id*delay)+\"ms\"});\n\t});\n};\n\n\n//affiche le backdrop\n//on utilise la fonction func pour gérer le contenu\nexport const showBackdrop = (duration, func) => {\n\t$(\".backdrop\").addClass(\"show\");\n\tif (typeof func === \"function\")\n\t\tfunc.apply(this);\n\tsetTimeout(() => {\n\t\t$(\".backdrop\").removeClass(\"show\");\n\t}, duration);\n};\n\n"]}